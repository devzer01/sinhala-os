use16       ; 16-bit mode

org 0x7C00 ; address of the boot sector

BootStageOne:
    ;mov ah, 09h
    ;mov dl, 80h
    ;int 13h

    ;mov ah, 08h
    ;mov dl, 80h
    ;mov di, 0x500
    ;int 13h

    mov ah, 02h
    mov al, 1
    mov ch, 0
    mov cl, 2
    mov dh, 0
    mov dl, 80h
    mov bx, fontdata
    int 13h
    jmp fontdata
    times 510-($-$$) db 0
end:
    dw 0xAA55

fontdata:
        ; Print 'a'.
        mov ax, 0x0E61
        int 0x10

        cli
        hlt

        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 7, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 6, 7, 5, 6, 8, 5, 5, 5
        db 5, 5, 5, 5, 5, 5, 5, 5, 5

        ; Pad image to multiple of 512 bytes.
        times 0x400 - ($ - $$) db 0x99