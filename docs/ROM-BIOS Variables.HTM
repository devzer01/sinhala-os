<html><!-- This document Copyright � 1997 by Dan Rollins --><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>ROM-BIOS Variables</title></head>
<body><form><table border="5" bgcolor="#C0C0C0"><tbody><tr><td><input value="Top" onclick="window.location='0002.HTM'" type="button"></td><td><input value="Tech Topics" onclick="window.location='0003.HTM'" type="button"></td><td><input value="- -" onclick="window.location='0092.HTM'" type="button"></td><td><input value="++" onclick="window.location='0094.HTM'" type="button"></td><td><input value="GoBack" onclick="history.back()" type="button"></td><td><input value="TECH Help! Home Page" onclick="window.location='INDEX.HTM'" type="button"></td></tr></tbody></table></form><h2>ROM-BIOS Variables</h2><pre> This maps the most important of the ROM-BIOS variables and data areas.
 All addresses are documented and should be valid in future BIOSes. The
 map is sequential by memory address, with blank lines indicating rough
 functional groups.  Addresses not shown should be considered reserved.

    Note: Although this table shows addresses as offsets from segment 40H,
          it is valid to use offsets from absolute segment 00H.  For
          instance, a variable shown to be at address 40:0012 can also be
          addressed at 0:0412.

Address Size Contents
������� ���� ���������������������������������������������������������������
40:0000   2  Base port address of first RS-232 adapter (COM1) See <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">COM Ports</a>
40:0002   2  Port of COM2
40:0004   2  Port of COM3
40:0006   2  Port of COM4
40:0008   2  Base port addr of first parallel printer (LPT1)  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">Printer Ports</a>
40:000A   2  Port of LPT2
40:000C   2  Port of LPT3
40:000E   2  Port of LPT4
40:0010   2  Equipment/hardware installed/active; see <a href="http://webpages.charter.net/danrollins/techhelp/0059.HTM">Equipment List</a>
40:0012   1  Errors in PCjr infrared keyboard link
40:0013   2  Total memory in K-bytes (same as obtained via <a href="http://webpages.charter.net/danrollins/techhelp/0184.HTM">INT 12H</a>)
40:0015   2  Scratch pad for manufacturing error tests

40:0017   2  Keyboard status bits; see <a href="http://webpages.charter.net/danrollins/techhelp/0058.HTM">Keyboard Shift Status Flags</a>
40:0019   1  Current (accumulating) value of Alt+numpad pseudo-key input;
             normally 0.  When [Alt] is released, value is stored in
             keyboard buffer at 001e.
40:001a   2  Addr of keyboard buffer head (keystroke at that addr is next)
40:001c   2  Address of keyboard buffer tail
40:001e  32  Keyboard buffer.  BIOS stores keystrokes here (head and tail
             point to addresses from 041eH to 043dH inclusive).

40:003e   1  Diskette drive needs recalibration (bit 0=A, bit 1=B, etc.)
             bits 4-5 indicate which drive is currently selected
40:003f   1  Diskette motor is running (bit 0=drive A, bit 1=B, etc.)
40:0040   1  Time until motor off. <a href="http://webpages.charter.net/danrollins/techhelp/0105.HTM">INT 08H</a> turns motor off when this is 0.
40:0041   1  Diskette error status; same as status returned by <a href="http://webpages.charter.net/danrollins/techhelp/0185.HTM">INT 13H</a>
40:0042   7  Diskette controller status information area

40:0049   1  Current active video mode.  See <a href="http://webpages.charter.net/danrollins/techhelp/0114.HTM">Video Modes</a> and <a href="http://webpages.charter.net/danrollins/techhelp/0113.HTM">INT 10H</a>.
40:004a   2  Screen width in text columns
40:004c   2  Length (in bytes) of video area (regen size)
40:004e   2  Offset from video segment of active video memory page
40:0050  16  Cursor location (8 byte-pairs; low byte=clm, hi byte=row)
40:0060   2  Cursor size/shape.  Low byte=end scan line; hi byte=start line.
40:0062   1  Current active video page number
40:0063   2  Port address for 6845 video controller chip; see <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">CGA I/O Ports</a>
40:0065   1  Current value of 6845 video ctrlr CRT_MODE (port 3x8H register)
40:0066   1  Current value of 6845 video ctrlr CRT_PALETTE (port 3x9H reg)

40:0067   5  Cassette data area or <a href="http://webpages.charter.net/danrollins/techhelp/0264.HTM">POST</a> data area
40:006c   4  Timer tick counter (count of 55ms ticks since CPU reset)
40:0070   1  Timer overflow flag (timer has rolled over 24 hr)
40:0071   1  Ctrl-Break flag.  Bit 7=1 when break was pressed.  This never
             gets reset unless you do it yourself.

40:0072   2  1234H means Ctrl+Alt+Del reboot is in progress.  BIOS checks
             this to avoid doing a "cold boot" with the time-consuming <a href="http://webpages.charter.net/danrollins/techhelp/0264.HTM">POST</a>
             4321H means reset, preserving memory
             5678H, 9abcH, and abcdH (are internal PC Convertible codes)

40:0074   4  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PCjr</a> diskette or <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> hard disk control area
  (0074)   1 Status of last fixed-disk drive operation
  (0075)   1 Number of hard disk drives for <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a>
  (0077)   1 Hard disk port for <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">XT</a>.  See <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">XT Hard Disk Ports</a>.
40:0078   4  Printer time-out values (478H=Lpt1, 478H=Lpt2...)
40:007c   4  RS-232 time-out values  (47cH=Com1, 47dH=Com2...)

40:0080   2  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> keyboard buffer offset start address (usually 01eH)
40:0082   2                                   end address (usually 003eH)

40:0084   1  <a href="http://webpages.charter.net/danrollins/techhelp/0067.HTM">EGA</a> text rows-1  (maximum valid row value)
40:0085   2  <a href="http://webpages.charter.net/danrollins/techhelp/0067.HTM">EGA</a> bytes per character (scan-lines/char used in active mode)
40:0087   1  <a href="http://webpages.charter.net/danrollins/techhelp/0067.HTM">EGA</a> flags; see <a href="http://webpages.charter.net/danrollins/techhelp/0072.HTM">EgaMiscInfoRec</a>
40:0088   1  <a href="http://webpages.charter.net/danrollins/techhelp/0067.HTM">EGA</a> flags; see <a href="http://webpages.charter.net/danrollins/techhelp/0072.HTM">EgaMiscInfo2Rec</a>
40:0089   1  <a href="http://webpages.charter.net/danrollins/techhelp/0070.HTM">VGA</a> flags; see <a href="http://webpages.charter.net/danrollins/techhelp/0073.HTM">VgaFlagsRec</a>
             See also:  <a href="http://webpages.charter.net/danrollins/techhelp/0071.HTM">EGA/VGA Data Areas</a>

40:008b   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Media control: data rate, step rate
40:008c   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Hard disk drive controller status
40:008d   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Hard disk drive error status
40:008e   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Hard disk drive interrupt control

40:0090   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Disk media state bits for drive 0
40:0091   1                                for drive 1
40:0092   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Disk operation started flag for drive 0
40:0093   1                                      for drive 1
40:0094   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">PS/2</a> Present cylinder number for drive 0
40:0095   1                                  for drive 1

40:0096   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> Keyboard flag bit 4=1 (10H) if 101-key keyboard is attached
40:0097   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> Keyboard flag for LED 'key lock' display
             bits 0-2 are ScrollLock, NumLock, CapsLock

40:0098   4  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> Pointer to 8-bit user wait flag; see <a href="http://webpages.charter.net/danrollins/techhelp/0221.HTM">INT 15H 86H</a>
40:009c   4  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> Microseconds before user wait is done
40:00a0   1  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> User wait activity flag:
                01H=busy, 80H=posted, 00H=acknowledged

40:00a1   7  <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">AT</a> Reserved for network adapters

40:00a8   4  <a href="http://webpages.charter.net/danrollins/techhelp/0067.HTM">EGA</a> Address of table of pointers; see <a href="http://webpages.charter.net/danrollins/techhelp/0074.HTM">EgaSavePtrRec</a>

40:00f0  16  (IAC) Inter-Aapplication Communication area.  Programs may use
             this area to store status, etc.  Might get overwritten by
             another program.

40:0100   1  Print-screen status:
               00H=ok; 01H=printing; 0ffH=error while printing screen

40:0104   1  Phantom-floppy status;  see also DOS fn <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">440eH</a>
               01H=drive A is acting as drive B.
40:0110  17  Used by BASIC interpreter
40:0130   3  Used by MODE command
������� ���� ���������������������������������������������������������������
f000:fff0 5  FAR JMP instruction to begin <a href="http://webpages.charter.net/danrollins/techhelp/0264.HTM">POST</a>
             (after a hard reset, the CPU jumps here)
f000:fff5 8  ROM-BIOS release date in ASCII (eg, "04/24/81" is original PC)
f000:fffc 2  (unused)
f000:fffe 1  IBM computer-type code; see also BIOS <a href="http://webpages.charter.net/danrollins/techhelp/0227.HTM">INT 15H C0H</a>
               0ffH = original PC
               0feH = XT or Portable PC
               0fdH = PCjr
               0fcH = AT (or XT model 286) (or PS/2 Model 50/60)
               0fbH = XT with 640K motherboard
               0faH = PS/2 Model 30
               0f9H = Convertible PC (easily converts into a paperweight)
               0f8H = PS/2 Model 80

See Also: <a href="http://webpages.charter.net/danrollins/techhelp/0094.HTM">General Memory Map</a>
          <a href="http://webpages.charter.net/danrollins/techhelp/0071.HTM">EGA/VGA Data Areas</a>
          <a href="http://webpages.charter.net/danrollins/techhelp/NOTHERE.HTM">I/O Port Map</a>
          <a href="http://webpages.charter.net/danrollins/techhelp/0095.HTM">ROM-BIOS Functions</a>
                                    -*-
</pre>
</body></html>